gitcheck_paths:
- ./
gitcheck_pkgs:
- numpy
- scipy

globals:
  estimator: TT
  maps-path: /rds/project/dirac_vol5/rds-dirac-dp002/ia404/fgs/rawmaps_250103/ # 41227/
  experiment: 'ACT'
  freq: 90
  mlmax: 4000
  fskys: GAL070
  lmax: 3000
  filter-whitefwhm: 1.4
  filter-whiteamplitude: 12
  bias-hardening: True
  profile-hardening: True
  profile-path: /home/ia404/gitreps/so-lenspipe/data/tsz_profile5000.txt
  
root_dir: /rds/project/dirac_vol5/rds-dirac-dp002/ia404/fgs/

stages:

  stage_filter_ACT_10:
    exec: python
    globals:
      - estimator
      - maps-path
      - experiment
      - mlmax
      - lmax
      - filter-whitefwhm
      - filter-whiteamplitude
      - bias-hardening
      - profile-hardening
      - profile-path
      - freq
      - fskys
    options:
      fgtypes: 'd9 d10 d12 DF_EB0'
      lmin: 10
    parallel:
      nproc: 1
      threads: 7
      walltime: '00:25:00'
    script: compute_biases.py

  stage_filter_ACT_100:
    exec: python
    globals:
      - estimator
      - maps-path
      - experiment
      - mlmax
      - lmax
      - filter-whitefwhm
      - filter-whiteamplitude
      - bias-hardening
      - profile-hardening
      - profile-path
      - freq
      - fskys
    options:
      fgtypes: 'd9 d10 d12 DF_EB0'
      lmin: 100
    parallel:
      nproc: 1
      threads: 7
      walltime: '00:25:00'
    script: compute_biases.py

  stage_filter_ACT_400:
    exec: python
    globals:
      - estimator
      - maps-path
      - experiment
      - mlmax
      - lmax
      - filter-whitefwhm
      - filter-whiteamplitude
      - bias-hardening
      - profile-hardening
      - profile-path
      - freq
      - fskys
    options:
      fgtypes: 'd9 d10 d12 DF_EB0'
      lmin: 400
    parallel:
      nproc: 1
      threads: 7
      walltime: '00:25:00'
    script: compute_biases.py


  stage_filter_ACT_600:
    exec: python
    globals:
      - estimator
      - maps-path
      - experiment
      - mlmax
      - lmax
      - filter-whitefwhm
      - filter-whiteamplitude
      - bias-hardening
      - profile-hardening
      - profile-path
      - freq
      - fskys
    options:
      fgtypes: 'd9 d10 d12 DF_EB0'
      lmin: 600
    parallel:
      nproc: 1
      threads: 7
      walltime: '00:25:00'
    script: compute_biases.py